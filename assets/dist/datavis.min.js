jQuery(document).ready(function(b){"use strict";function t(c){var t=b("#"+c),o=b(window).width()<762,d=30,e=o?20:60,a=60,s=40,u=t.width(),m=u-s-e,h=300,f=h-d-a,p=1.5,v=4,g=t.data("stroke-color"),x="month"===t.data("time-format")?{month:"long"}:{month:"short",day:"numeric",year:"numeric"},n=d3.timeParse("%Y-%m-%d"),r=t.data("chart-raw"),y=r?r.map(function(t){return t.date=n(t.date),t}):null;function w(t,e,a,n){if(!e)return t.style("display","none");t.attr("class","tooltip").style("display",null).style("pointer-events","none");var r=t.selectAll("rect").data([null]).join("rect").attr("rx",2).attr("ry",2),l=t.selectAll("text").data([null]).join("text").call(function(t){return t.selectAll("tspan").data(e.split(/\n/)).join("tspan").attr("x",0).attr("y",function(t,e){return 1.2*e+"em"}).style("font-weight",function(t,e){return e?null:"bold"}).text(function(t){return t})}),i=l.node().getBBox(),c=i.width,o=i.height,d=20;return t.selectAll("circle").data([null]).join("circle").attr("r",v).attr("stroke-width",p).attr("fill",n?"none":"white"),r.attr("width",c+d).attr("height",o+d),m<a+c?(l.attr("transform","translate("+(-c-d)+","+-((o-d)/2-2)+")"),r.attr("x",-(c+10+d)).attr("y",-(o+d)/2)):(l.attr("transform","translate(20,"+-((o-d)/2-2)+")"),r.attr("x",10).attr("y",-(o+d)/2)),t}!function(){if(y){var t,a,e=4,i=d3.scaleTime().nice().domain(d3.extent(y,function(t){return t.date})).range([0,m]),n=d3.scaleLinear().domain([0,d3.max(y,function(t){return t.value})]).range([f,0]),r=d3.select("#"+c),l=u/h;t=r.append("svg").attr("width",u).attr("height",h).attr("perserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+u+" "+h).append("g").attr("transform","translate("+s+","+d+")"),d3.select(window).on("resize",function(){var t=r.node().getBoundingClientRect().width;r.selectAll("svg").attr("width",t),r.selectAll("svg").attr("height",t/l)}),t.append("g").call(function(t){t.attr("transform","translate(0,"+f+")").call(d3.axisBottom(i).ticks(d3.timeMonth,1).tickFormat(o?d3.timeFormat("%b"):d3.timeFormat("%B"))).call(function(t){t.select(".domain").remove()})}),t.append("g").call(function(t){t.attr("class","yAxis").call(d3.axisLeft(n).ticks(e).tickFormat(d3.format(".2s")).tickSize(-1*m)).call(function(t){t.select(".domain").remove()})}),t.append("path").datum(y).attr("fill","none").attr("stroke-width",p).attr("stroke","black").attr("class","line "+g).attr("d",d3.line().x(function(t){return i(t.date)}).y(function(t){return n(t.value)})),t.append("g").selectAll("circle").data(y.filter(function(t){return t.event})).enter("circle").append("circle").attr("class","circle "+g).attr("r",v).attr("cx",function(t){return i(t.date)}).attr("cy",function(t){return n(t.value)}),a=t.append("g"),t.append("rect").attr("class","overlay").attr("pointer-events","all").attr("x",0).attr("y",0).attr("width",m).attr("height",f).on("touchmove mousemove",function(){var t=function(t){var e=d3.bisector(function(t){return t.date}).left,a=i.invert(t),n=e(y,a,1),r=y[n-1],l=y[n];return a-r.date>l.date-a?l:r}(d3.mouse(this)[0]),e=t.date.toLocaleString(void 0,x)+"\n"+d3.format(",")(t.value);a.attr("transform","translate("+i(t.date)+","+n(t.value)+")").call(w,e,i(t.date),t.event),t.event?(b("#label-date").text(t.date.toLocaleString(void 0,x)),b("#label-name").text(t.event),b("#linechart-label").css("opacity",1),b("#linechart-label").css("max-height","10rem")):(b("#linechart-label").css("opacity",0),b("#linechart-label").css("max-height","2rem"))}).on("touchend mouseleave",function(){a.call(w,null)})}}()}b(".d3-chart").each(function(){t(this.id)})});
//# sourceMappingURL=maps/datavis.min.js.map
