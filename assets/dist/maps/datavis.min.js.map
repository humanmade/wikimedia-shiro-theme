{"version":3,"sources":["datavis.min.js"],"names":["jQuery","document","ready","$","each","id","$id","margin","numFormat","d3","format","width","shift","x","y","maxFeature1","data","maxFeature2","profInRow","Math","max","floor","masterunit","moreHorUnits","dataStart","dataEnd","labels","icons","except","exceptLang","exceptHeightMulti","height","yPos","d","i","gutter","xPos","fAttr","sel","shape","attr","parseFloat","selectAll","nodes","getAttribute","svg","editors","articles","views","tooltip","container","select","checks","aspect","mappedData","map","p","index","unitSum","remain","specHorUnits","rows","ceil","unitArray","h","push","value","slice","length","Rows","ddata","maxRows","editorScale","scaleLinear","domain","range","articleScale","viewsUnitScale","viewsYScale","viewsXScale","horUnits","append","window","resize","targetWidth","node","getBoundingClientRect","call","g","join","e","a","ix","ry","normalPosX","normalPosY","exceptPosX","exceptPosY","transX","transY","offset","g1","text","g2","style","borderHeight","endX","v","datalabelText","d0","aObj","vx1","vxCenter","vy1","lastRowOverHalf","customLegend","y2","class","highlight","name","marginBottom","on","_","hover","click","checkBoxStates","transition","editXPos","artXPos","artW","posInRow","min","size","hoverLabels","path","labelPos","is","$elem","fadeIn","fadeOut","addVis","dataProfiles","this","lineChart","isMobile","origWidth","strokeWidth","circleDiameter","accentColorClass","timeFormatPrefs","month","day","year","parseTimeFormat","timeParse","dataRaw","wp","date","callout","evnt","rect","t","split","bbox","getBBox","w","ttipMar","ticks","scaleTime","nice","extent","axisBottom","timeMonth","tickFormat","timeFormat","remove","axisLeft","tickSize","datum","line","filter","event","enter","hoverD","mx","bisect","bisector","left","invert","b","bisectDate","mouse","context","toLocaleString","undefined","css"],"mappings":"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","file":"../datavis.min.js","sourcesContent":["/* global d3 */\n/* eslint-disable no-magic-numbers */\n\njQuery(document).ready(function($) {\n\n\t'use strict';\n\n\tfunction dataProfiles(id) {\n\t\tvar $id = $(\"#\" + id),\n\t\t\tmargin = 10,\n\t\t\tstrokeW = 2,\n\t\t\tnumFormat = d3.format(\",\"),\n\t\t\twidth = $id.width(),\n\t\t\tshift = { x: width < 400 ? (width - margin * 4) / 2 : 190, y: 125 },\n\t\t\tmaxFeature1 = $id.data(\"max-feature-1\") ? $id.data(\"max-feature-1\") : 90,\n\t\t\tmaxFeature2 = $id.data(\"max-feature-2\") ? $id.data(\"max-feature-2\") : 90,\n\t\t\tprofInRow = Math.max(Math.floor(width / shift.x), 2),\n\t\t\tmasterunit = $id.data(\"chart-masterunit\") ? $id.data(\"chart-masterunit\") : 500000,\n\t\t\thorUnits = 5,\n\t\t\tmoreHorUnits = 30,\n\t\t\tdata = $id.data(\"chart-raw\"),\n\t\t\tdataStart = $id.data(\"slice-start\"),\n\t\t\tdataEnd = $id.data(\"slice-end\"),\n\t\t\t// This is setup so properties/labels don't matter\n\t\t\t// But labels map to this order: circle, rectangle, ellipses\n\t\t\tlabels = $id.data(\"chart-labels\"),\n\t\t\ticons = $id.data(\"chart-icons\"),\n\t\t\texcept = $id.data(\"chart-except\"),\n\t\t\texceptI = 0,\n\t\t\texceptLang = except ? data[labels[exceptI]] : \"\",\n\t\t\texceptHeightMulti = 4.2,\n\t\t\theight = except ? shift.y * exceptHeightMulti : yPos(null, dataEnd-dataStart-1) + shift.y;\n\n\t\tfunction yPos(d, i) {\n\t\t\tvar gutter = margin * 6,\n\t\t\t\ttopmargin = except ? 0 : margin * 5;\n\t\t\treturn topmargin + (shift.y + gutter) * Math.floor(i / profInRow);\n\t\t}\n\n\t\tfunction xPos(d, i) {\n\t\t\treturn i % profInRow * shift.x;\n\t\t}\n\n\t\tfunction fAttr(sel, shape, i, attr) {\n\t\t\treturn parseFloat(sel.selectAll(shape).nodes()[i].getAttribute(attr));\n\t\t}\n\n\t\tfunction addVis() {\n\t\t\tif (!data) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction editorsConstruct(g) {\n\t\t\t\treturn g\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"profile-feature1\")\n\t\t\t\t\t.selectAll(\"circle\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"circle\")\n\t\t\t\t\t.attr(\"cx\", function(d, i) {return except ? xPos(d, i) + width/4 : xPos(d, i) + editorScale(d[labels[1]])})\n\t\t\t\t\t.attr(\"cy\", function(d, i) {return yPos(d, i) + editorScale(d[labels[1]])})\n\t\t\t\t\t.attr(\"r\", function(d) {return editorScale(d[labels[1]])})\n\t\t\t}\n\n\t\t\tfunction articlesConstruct(g, e) {\n\t\t\t\treturn g\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"profile-feature2\")\n\t\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"rect\")\n\t\t\t\t\t.attr(\"x\", function(d, i) {return except ? width/2 + (width/2-articleScale(d[labels[2]])*0.75)/2 : fAttr(e, \"circle\", i, \"cx\") + fAttr(e, \"circle\", i, \"r\") + margin/2})\n\t\t\t\t\t.attr(\"y\", function(d, i) {return yPos(d, i)})\n\t\t\t\t\t.attr(\"width\", function(d) {return articleScale(d[labels[2]])*0.75})\n\t\t\t\t\t.attr(\"height\", function(d) {return articleScale(d[labels[2]])})\n\t\t\t\t\t.attr(\"rx\", function(d) {return articleScale(d[labels[2]])*0.08})\n\t\t\t\t\t.attr(\"ry\", function(d) {return articleScale(d[labels[2]])*0.08});\n\t\t\t}\n\n\t\t\tfunction viewsConstruct(g, e, a) {\n\t\t\t\tg.attr(\"class\", \"profile-feature3\");\n\t\t\t\t/* eslint-disable no-loop-func, one-var */\n\t\t\t\tfor (var ix = 0; ix < ddata.length; ix++) {\n\t\t\t\t\tvar ry = viewsUnitScale(masterunit) / 3 * 2,\n\t\t\t\t\t\tnormalPosX = fAttr(a, \"rect\", ix, \"x\") + fAttr(a, \"rect\", ix, \"width\") + margin,\n\t\t\t\t\t\tnormalPosY = fAttr(a, \"rect\", ix, \"y\") + ry,\n\t\t\t\t\t\texceptPosX = (width - viewsXScale(moreHorUnits)) / 2,\n\t\t\t\t\t\texceptPosY = fAttr(e, \"circle\", ix, \"cx\") + fAttr(e, \"circle\", ix, \"r\") + margin * 5,\n\t\t\t\t\t\ttransX = except ? exceptPosX : normalPosX,\n\t\t\t\t\t\ttransY = except ? exceptPosY : normalPosY;\n\n\t\t\t\t\tg\n\t\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t\t.attr(\"class\", \"viewsContainer\")\n\t\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t\t.selectAll(\"ellipse\")\n\t\t\t\t\t\t.data(ddata[ix].unitArray)\n\t\t\t\t\t\t.join(\"ellipse\")\n\t\t\t\t\t\t.attr(\"class\", \"views-\" + ix)\n\t\t\t\t\t\t.attr(\"cx\", function(d) {return transX + viewsXScale(d.x)})\n\t\t\t\t\t\t.attr(\"cy\", function(d) {return transY + viewsYScale(d.y)})\n\t\t\t\t\t\t.attr(\"rx\", function(d) {return viewsUnitScale(d.value)})\n\t\t\t\t\t\t.attr(\"ry\", function(d) {return viewsUnitScale(d.value)/3*2});\n\t\t\t\t\t/* eslint-disable no-loop-func, one-var */\n\t\t\t\t}\n\n\t\t\t\treturn g;\n\t\t\t}\n\n\t\t\tfunction labelConstruct(g, e, offset) {\n\t\t\t\treturn g\n\t\t\t\t\t.call(function(g1) {\n\t\t\t\t\t\treturn g1\n\t\t\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t\t\t.attr(\"class\", \"main-labels\")\n\t\t\t\t\t\t\t.selectAll(\"text\")\n\t\t\t\t\t\t\t.data(ddata)\n\t\t\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"start\")\n\t\t\t\t\t\t\t.attr(\"dy\", -5) // create some padding at the bottom\n\t\t\t\t\t\t\t.attr(\"x\", function(d, i) {return except ? xPos(d, i) + margin*exceptHeightMulti + margin : xPos(d, i) + margin * 2})\n\t\t\t\t\t\t\t.attr(\"y\", function(d, i) {return except ? height - margin : yPos(d, i) + shift.y*0.75 + margin})\n\t\t\t\t\t\t\t.text(function(d) {return labels.length > 4 ? d[labels[4]] : d[labels[0]] })\n\t\t\t\t\t})\n\t\t\t\t\t.call(function(g2) {\n\t\t\t\t\t\treturn g2\n\t\t\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t\t\t.attr(\"class\", \"main-label-ranks\")\n\t\t\t\t\t\t\t.style(\"display\", \"none\")\n\t\t\t\t\t\t\t.selectAll(\"text\")\n\t\t\t\t\t\t\t.data(ddata)\n\t\t\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"start\")\n\t\t\t\t\t\t\t.attr(\"dy\", -30) // above mainlabel\n\t\t\t\t\t\t\t.attr(\"x\", function(d, i) {return except ? xPos(d, i) + margin*exceptHeightMulti + margin : xPos(d, i) + margin * 2})\n\t\t\t\t\t\t\t.attr(\"y\", function(d, i) {return except ? height - margin : yPos(d, i) + shift.y*0.75 + margin})\n\t\t\t\t\t\t\t.text(function(d, i) {return i + 1 + offset});\n\t\t\t\t\t})\n\t\t\t}\n\n\n\t\t\tfunction borderleft(g) {\n\t\t\t\tvar borderHeight = except ? height : shift.y - margin,\n\t\t\t\t\tendX = except ? margin * exceptHeightMulti : margin;\n\t\t\t\treturn g\n\t\t\t\t\t.attr(\"stroke-width\", strokeW)\n\t\t\t\t\t.attr(\"class\", \"borderleft\")\n\t\t\t\t\t.selectAll(\"line\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"line\")\n\t\t\t\t\t.attr(\"x1\", function(d, i) {return xPos(d, i) + strokeW})\n\t\t\t\t\t.attr(\"x2\", function(d, i) {return xPos(d, i) + endX})\n\t\t\t\t\t.attr(\"y1\", function(d, i) {return yPos(d, i)})\n\t\t\t\t\t.attr(\"y2\", function(d, i) {return yPos(d, i) + borderHeight});\n\t\t\t}\n\n\t\t\tfunction legendConstruct(g, e, a, v) {\n\t\t\t\tvar datalabelText,\n\t\t\t\t\td0 = ddata[0],\n\t\t\t\t\taObj = {\n\t\t\t\t\t\tx: fAttr(a, \"rect\", 0, \"x\"),\n\t\t\t\t\t\ty: fAttr(a, \"rect\", 0, \"y\"),\n\t\t\t\t\t\tw: fAttr(a, \"rect\", 0, \"width\"),\n\t\t\t\t\t\th: fAttr(a, \"rect\", 0, \"height\"),\n\t\t\t\t\t},\n\t\t\t\t\tvx1 = fAttr(v, \"ellipse\", 0, \"cx\"),\n\t\t\t\t\tvxCenter = fAttr(v, \"ellipse\", Math.floor(moreHorUnits/2) - 1, \"cx\"),\n\t\t\t\t\tvy1 = fAttr(v, \"ellipse\", moreHorUnits * (d0.Rows - 1), \"cy\"),\n\t\t\t\t\tlastRowOverHalf = moreHorUnits * d0.Rows % d0.unitArray.length > Math.ceil(moreHorUnits/2) + 1,\n\t\t\t\t\tmarginBottom = 60,\n\t\t\t\t\tcustomLegend = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tx: fAttr(e, \"circle\", 0, \"cx\"),\n\t\t\t\t\t\t\ty: fAttr(e, \"circle\", 0, \"cy\") + fAttr(e, \"circle\", 0, \"r\") - margin,\n\t\t\t\t\t\t\ty2: height - marginBottom,\n\t\t\t\t\t\t\th: 45,\n\t\t\t\t\t\t\tclass: \"profile-feature1\",\n\t\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t\t\tname: [numFormat(d0[labels[1]]) + \" \" + labels[1]]\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tx: aObj.x + aObj.w * 0.5,\n\t\t\t\t\t\t\ty: aObj.y + aObj.h - margin,\n\t\t\t\t\t\t\ty2: height - marginBottom,\n\t\t\t\t\t\t\th: 45,\n\t\t\t\t\t\t\tclass: \"profile-feature2\",\n\t\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t\t\tname: [numFormat(d0[labels[2]]) + \" \" + labels[2]]\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tx: vxCenter,\n\t\t\t\t\t\t\ty: lastRowOverHalf ? vy1 : vy1 + margin,\n\t\t\t\t\t\t\ty2: height - marginBottom * 1.5,\n\t\t\t\t\t\t\th: 45,\n\t\t\t\t\t\t\tclass: \"profile-feature3\",\n\t\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t\t\tname: [numFormat(d0[labels[3]]) + \" \" + labels[3]]\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tx: vx1,\n\t\t\t\t\t\t\ty: vy1,\n\t\t\t\t\t\t\ty2: height - marginBottom * 2,\n\t\t\t\t\t\t\th: 20,\n\t\t\t\t\t\t\tclass: \"profile-feature3\",\n\t\t\t\t\t\t\thighlight: false,\n\t\t\t\t\t\t\tname: [numFormat(masterunit), labels[3]]\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\tg\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"data-label-lines\")\n\t\t\t\t\t.selectAll(\"line\")\n\t\t\t\t\t.data(customLegend)\n\t\t\t\t\t.join(\"line\")\n\t\t\t\t\t.attr(\"class\", function(d) {return d.class})\n\t\t\t\t\t.attr(\"x1\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"x2\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"y1\", function(d) {return d.y})\n\t\t\t\t\t.attr(\"y2\", function(d) {return d.y + d.h})\n\t\t\t\t\t.attr(\"stroke-dasharray\", function(d) {return d.highlight ? \"\" : margin/3 + \",\" + margin/4})\n\n\t\t\t\tdatalabelText = g\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\")\n\t\t\t\t\t.attr(\"class\", \"data-label-text\")\n\t\t\t\t\t.selectAll(\"text\")\n\t\t\t\t\t.data(customLegend)\n\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t.attr(\"class\", function(d) {return d.class})\n\t\t\t\t\t.attr(\"x\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"y\", function(d) {return d.y + d.h})\n\t\t\t\t\t.attr(\"dy\", margin*1.5)\n\t\t\t\t\t.attr(\"stroke-width\", 0)\n\t\t\t\t\t.attr(\"font-weight\", function(d) {return d.highlight ? \"bold\" : \"normal\"})\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\n\t\t\t\tdatalabelText\n\t\t\t\t\t.append(\"tspan\")\n\t\t\t\t\t.attr(\"x\", function(d) {return d.x})\n\t\t\t\t\t.text(function(d) {return d.name[0]});\n\n\t\t\t\tdatalabelText\n\t\t\t\t\t.append(\"tspan\")\n\t\t\t\t\t.attr(\"x\", function(d) {return d.x})\n\t\t\t\t\t.attr(\"dy\", 16)\n\t\t\t\t\t.text(function(d) {return d.name[1]});\n\n\t\t\t\treturn g;\n\t\t\t}\n\n\t\t\tfunction mappedViewsData(_data) {\n\t\t\t\treturn _data.map(function(p, index) {\n\t\t\t\t\tvar unitSum = Math.floor(p[labels[3]]/masterunit),\n\t\t\t\t\t\tremain = p[labels[3]] % masterunit,\n\t\t\t\t\t\tspecHorUnits = index === exceptI ? moreHorUnits : horUnits,\n\t\t\t\t\t\trows = Math.ceil(unitSum/specHorUnits);\n\t\t\t\t\tp.unitArray = [];\n\t\t\t\t\tfor (var i = 0; i < rows; i++) { // eslint-disable-line one-var\n\t\t\t\t\t\tfor (var h = 0; h < specHorUnits; h++) { // eslint-disable-line one-var\n\t\t\t\t\t\t\tp.unitArray.push({ x: h, y: i, value: masterunit })\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tp.unitArray = p.unitArray.slice(0, unitSum); // only take the amount of spaces needed\n\t\t\t\t\tp.unitArray[p.unitArray.length-1].value = remain; // last space is the remainder, not a full masterunit\n\t\t\t\t\tp.Rows = rows;\n\t\t\t\t\treturn p;\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tfunction hover(g, index, e, a, v) { //eslint-disable-line max-params\n\t\t\t\tif (index === null) return g\n\t\t\t\t\t.transition()\n\t\t\t\t\t.attr(\"opacity\", 0)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.style(\"display\", \"none\");\n\n\t\t\t\tvar editXPos = fAttr(e, \"circle\", index, \"cx\"),\n\t\t\t\t\tartXPos = fAttr(a, \"rect\", index, \"x\"),\n\t\t\t\t\tartW = fAttr(a, \"rect\", index, \"width\"),\n\t\t\t\t\tposInRow = fAttr(v, \".views-\" + index, Math.min(Math.floor(horUnits/2), ddata[index].unitArray.length - 1), \"cx\") + margin,\n\t\t\t\t\tsize = margin,\n\t\t\t\t\thoverLabels = [{\n\t\t\t\t\t\tvalue: ddata[index][labels[1]],\n\t\t\t\t\t\tpath: \"M\" + (editXPos + margin) + \" \" + (yPos(null, index) + margin) + \"v -36h\",\n\t\t\t\t\t\tlabelPos: [editXPos, yPos(null, index) - 36]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: ddata[index][labels[2]],\n\t\t\t\t\t\tpath: \"M\" + (artXPos + margin + artW/2) + \" \" + (yPos(null, index) + margin) + \"v -18h\",\n\t\t\t\t\t\tlabelPos: [artXPos + artW / 2, yPos(null, index) - 18]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: ddata[index][labels[3]],\n\t\t\t\t\t\tpath: \"M\" + posInRow + \" \" + (yPos(null, index) + margin*0.7) + \"v -6h\",\n\t\t\t\t\t\tlabelPos: [posInRow - margin, yPos(null, index) - 6]\n\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\tg\n\t\t\t\t\t.transition()\n\t\t\t\t\t.attr(\"opacity\", 1)\n\t\t\t\t\t.style(\"display\", null)\n\t\t\t\t\t.style(\"pointer-events\", \"none\")\n\n\t\t\t\tg.selectAll(\"path\")\n\t\t\t\t\t.data(hoverLabels)\n\t\t\t\t\t.join(\"path\")\n\t\t\t\t\t.attr(\"class\", \"hover-label-lines\")\n\t\t\t\t\t.attr(\"d\", function(d) {return d.path})\n\t\t\t\t\t.style(\"display\", function(d, i) {return checks[i].is(\":checked\") ? \"block\" : \"none\" });\n\n\t\t\t\tg.selectAll(\"text\")\n\t\t\t\t\t.data(hoverLabels)\n\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t.attr(\"x\", function(d) {return d.labelPos[0]})\n\t\t\t\t\t.attr(\"y\", function(d) {return d.labelPos[1]})\n\t\t\t\t\t.attr(\"dy\", margin*0.5)\n\t\t\t\t\t.attr(\"dx\", margin*2)\n\t\t\t\t\t.text(function(d) {return numFormat(d.value)})\n\t\t\t\t\t.style(\"display\", function(d, i) {return checks[i].is(\":checked\") ? \"block\" : \"none\" });\n\n\t\t\t\tif (labels.length > 4) g.append(\"text\")\n\t\t\t\t\t.attr(\"x\", xPos(0, index) + margin)\n\t\t\t\t\t.attr(\"y\", yPos(null, index) + shift.y)\n\t\t\t\t\t.attr(\"dy\", -margin)\n\t\t\t\t\t.attr(\"dx\", margin)\n\t\t\t\t\t.text(ddata[index][labels[0]]);\n\n\t\t\t\tg.selectAll(\"image\")\n\t\t\t\t\t.data(hoverLabels)\n\t\t\t\t\t.join(\"image\")\n\t\t\t\t\t.attr(\"xlink:href\", function(d, i) {return icons[i]})\n\t\t\t\t\t.attr(\"width\", size)\n\t\t\t\t\t.attr(\"height\", size)\n\t\t\t\t\t.attr(\"x\", function(d) {return d.labelPos[0] + margin*0.5})\n\t\t\t\t\t.attr(\"y\", function(d) {return d.labelPos[1] - size*0.5})\n\t\t\t\t\t.style(\"display\", function(d, i) {return checks[i].is(\":checked\") ? \"block\" : \"none\" });\n\t\t\t\treturn g;\n\t\t\t}\n\n\t\t\tfunction checkBoxStates() {\n\t\t\t\tfor (var i = 0; i < checks.length; i++) {\n\t\t\t\t\tvar $elem = $(\".profile-feature\" + (i + 1));\n\t\t\t\t\tif (checks[i].is(\":checked\")) {\n\t\t\t\t\t\t$elem.fadeIn();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$elem.fadeOut();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!checks[0].is(\":checked\") && !checks[1].is(\":checked\") && !checks[2].is(\":checked\")) {$(\".main-label-ranks\").fadeIn()}\n\t\t\t\telse {$(\".main-label-ranks\").fadeOut()}\n\t\t\t}\n\n\t\t\tvar svg,\n\t\t\t\teditors,\n\t\t\t\tarticles,\n\t\t\t\tviews,\n\t\t\t\ttooltip,\n\t\t\t\tcontainer = d3.select(\"#\" + id),\n\t\t\t\tchecks = [$(\"#feature1\"), $(\"#feature2\"), $(\"#feature3\")],\n\t\t\t\taspect = width / height,\n\t\t\t\tmappedData = mappedViewsData(data),\n\t\t\t\tddata = mappedData.slice(dataStart, dataEnd),\n\t\t\t\tmaxRows = d3.max(mappedData, function(d) { return d.Rows }),\n\t\t\t\tunitR = 4,\n\t\t\t\teditorScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, d3.max(data, function(d) { return d[labels[1]] })])\n\t\t\t\t\t.range([0, maxFeature1]), //min and max radius of circle\n\t\t\t\tarticleScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, d3.max(data, function(d) { return d[labels[2]] })])\n\t\t\t\t\t.range([0, maxFeature2]), //min and max height of rect\n\t\t\t\tviewsUnitScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, masterunit])\n\t\t\t\t\t.range([0, unitR]), // min and max size of of 1 unit\n\t\t\t\tviewsYScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, maxRows])\n\t\t\t\t\t.range([0, maxRows * unitR * 2]), // min and max space for rows\n\t\t\t\tviewsXScale = d3.scaleLinear()\n\t\t\t\t\t.domain([0, horUnits])\n\t\t\t\t\t.range([0, horUnits * unitR * 2.5]); // min and max space for columns\n\n\n\t\t\tsvg = container.append(\"svg\")\n\t\t\t\t.attr(\"width\", width)\n\t\t\t\t.attr(\"height\", height)\n\t\t\t\t.attr(\"perserveAspectRatio\", \"xMidYMid meet\")\n\t\t\t\t.attr(\"viewBox\", \"0 0 \" + width + \" \" + height);\n\n\t\t\t// lazy resize, keeps proportions\n\t\t\t$( window ).resize(function(){\n\t\t\t\tvar targetWidth = container.node().getBoundingClientRect().width;\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"width\", targetWidth);\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"height\", targetWidth / aspect);\n\t\t\t});\n\n\t\t\teditors = svg.append(\"g\").call(editorsConstruct);\n\t\t\tarticles = svg.append(\"g\").call(articlesConstruct, editors);\n\t\t\tviews = svg.append(\"g\").call(viewsConstruct, editors, articles);\n\n\t\t\tsvg.append(\"g\").call(labelConstruct, editors, dataStart);\n\t\t\tsvg.append(\"g\").call(borderleft);\n\n\t\t\tif (except) {\n\t\t\t\tsvg.append(\"g\").call(legendConstruct, editors, articles, views);\n\t\t\t} else {\n\t\t\t\ttooltip = svg\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"class\", \"tooltip\");\n\n\t\t\t\tsvg\n\t\t\t\t\t.append(\"g\")\n\t\t\t\t\t.attr(\"opacity\", 0)\n\t\t\t\t\t.attr(\"class\", \"tooltipgrid\")\n\t\t\t\t\t.selectAll(\"rect\")\n\t\t\t\t\t.data(ddata)\n\t\t\t\t\t.join(\"rect\")\n\t\t\t\t\t.attr(\"class\", \"hover\")\n\t\t\t\t\t.attr(\"x\", function(d, i) {return xPos(d, i)})\n\t\t\t\t\t.attr(\"y\", function(d, i) {return yPos(d, i)})\n\t\t\t\t\t.attr(\"width\", shift.x)\n\t\t\t\t\t.attr(\"height\", shift.y)\n\t\t\t\t\t.on(\"touchstart mouseover\", function(_, i) {\n\t\t\t\t\t\tif (ddata[i][labels[0]] === exceptLang) return;\n\t\t\t\t\t\ttooltip\n\t\t\t\t\t\t\t.call(hover, i, editors, articles, views);\n\t\t\t\t\t})\n\t\t\t\t\t.on(\"touchend mouseout\", function() {tooltip.call(hover, null)});\n\n\t\t\t\t// applies to all, but only runs once\n\t\t\t\t$(\".chart-options input[type='checkbox']\").click(checkBoxStates);\n\t\t\t\tcheckBoxStates();\n\t\t\t}\n\t\t}\n\n\t\taddVis();\n\t}\n\n\t$(\".d3-dataprofiles\").each(function() {\n\t\tdataProfiles(this.id);\n\t});\n\n\n});\n/* global d3 */\n/* eslint-disable no-magic-numbers */\n\njQuery(document).ready(function($) {\n\n\t'use strict';\n\n\tfunction lineChart(id) {\n\t\tvar $id = $(\"#\" + id),\n\t\t\tmobileThresh = 762,\n\t\t\tisMobile = $(window).width() < mobileThresh,\n\t\t\tmargin = { top: 30, right: isMobile ? 20 : 60, bottom: 60, left: 40 },\n\t\t\torigWidth = $id.width(),\n\t\t\twidth = origWidth - margin.left - margin.right,\n\t\t\torigHeight = 300,\n\t\t\theight = origHeight - margin.top - margin.bottom,\n\t\t\tstrokeWidth = 1.5,\n\t\t\tcircleDiameter = 4,\n\t\t\taccentColorClass = $id.data(\"stroke-color\"),\n\t\t\ttimeFormatPrefs = $id.data(\"time-format\") === \"month\" ? { month: \"long\" } : { month: \"short\", day: \"numeric\", year: \"numeric\" },\n\t\t\tparseTimeFormat = d3.timeParse(\"%Y-%m-%d\"),\n\t\t\tdataRaw = $id.data(\"chart-raw\"),\n\t\t\tdata = dataRaw ? dataRaw.map(parseDates) : null;\n\n\t\tfunction parseDates(wp) {\n\t\t\twp.date = parseTimeFormat(wp.date);\n\t\t\treturn wp;\n\t\t}\n\n\t\tfunction callout(g, value, xPos, evnt) {\n\t\t\tif (!value) return g.style(\"display\", \"none\");\n\t\t\tg\n\t\t\t\t.attr(\"class\", \"tooltip\")\n\t\t\t\t.style(\"display\", null)\n\t\t\t\t.style(\"pointer-events\", \"none\");\n\n\t\t\tvar borderRadius = 2,\n\t\t\t\tlineHeight = 1.2,\n\t\t\t\trect = g.selectAll(\"rect\")\n\t\t\t\t\t.data([null])\n\t\t\t\t\t.join(\"rect\")\n\t\t\t\t\t.attr(\"rx\", borderRadius)\n\t\t\t\t\t.attr(\"ry\", borderRadius),\n\t\t\t\ttext = g.selectAll(\"text\")\n\t\t\t\t\t.data([null])\n\t\t\t\t\t.join(\"text\")\n\t\t\t\t\t.call(function(t) {\n\t\t\t\t\t\treturn t\n\t\t\t\t\t\t\t.selectAll(\"tspan\")\n\t\t\t\t\t\t\t.data(value.split(/\\n/))\n\t\t\t\t\t\t\t.join(\"tspan\")\n\t\t\t\t\t\t\t.attr(\"x\", 0)\n\t\t\t\t\t\t\t.attr(\"y\", function(d, i) { return i * lineHeight + \"em\" })\n\t\t\t\t\t\t\t.style(\"font-weight\", function(_, i) { return i ? null : \"bold\" })\n\t\t\t\t\t\t\t.text(function(d) { return d; })\n\t\t\t\t\t}),\n\t\t\t\tbbox = text.node().getBBox(),\n\t\t\t\tw = bbox.width,\n\t\t\t\th = bbox.height,\n\t\t\t\tttipMar = 10,\n\t\t\t\ttotalMar = ttipMar * 2,\n\t\t\t\tshift = 2;\n\n\t\t\tg.selectAll(\"circle\")\n\t\t\t\t.data([null])\n\t\t\t\t.join(\"circle\")\n\t\t\t\t.attr(\"r\", circleDiameter)\n\t\t\t\t.attr(\"stroke-width\", strokeWidth)\n\t\t\t\t.attr(\"fill\", evnt ? \"none\" : \"white\")\n\n\t\t\trect.attr(\"width\", w + totalMar).attr(\"height\", h + totalMar)\n\n\t\t\tif (xPos + w > width) {\n\t\t\t\ttext.attr(\"transform\", \"translate(\" + (-w - totalMar) + \",\" + -((h - totalMar) / 2 - shift) + \")\");\n\t\t\t\trect.attr(\"x\", -(w + ttipMar + totalMar)).attr(\"y\", -(h + totalMar) / 2);\n\t\t\t} else {\n\t\t\t\ttext.attr(\"transform\", \"translate(\" + totalMar + \",\" + -((h - totalMar) / 2 - shift) + \")\");\n\t\t\t\trect.attr(\"x\", ttipMar).attr(\"y\", -(h + totalMar) / 2);\n\t\t\t}\n\n\t\t\treturn g;\n\t\t}\n\n\t\tfunction addVis() {\n\t\t\tif (!data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar svg,\n\t\t\t\tticks = { x: 0, y: 4 },\n\t\t\t\tx = d3.scaleTime()\n\t\t\t\t\t.nice()\n\t\t\t\t\t.domain(d3.extent(data, function(d) { return d.date; }))\n\t\t\t\t\t.range([0, width]),\n\t\t\t\txAxis = function(g) {\n\t\t\t\t\tg\n\t\t\t\t\t\t.attr(\"transform\", \"translate(0,\" + height + \")\")\n\t\t\t\t\t\t.call(d3.axisBottom(x)\n\t\t\t\t\t\t\t.ticks(d3.timeMonth, 1)\n\t\t\t\t\t\t\t.tickFormat(isMobile ? d3.timeFormat(\"%b\") : d3.timeFormat(\"%B\")))\n\t\t\t\t\t\t.call(function(h) { h.select(\".domain\").remove(); })\n\t\t\t\t},\n\t\t\t\ty = d3.scaleLinear()\n\t\t\t\t\t.domain([0, d3.max(data, function(d) { return d.value; })])\n\t\t\t\t\t.range([height, 0]),\n\t\t\t\tyAxis = function(g) {\n\t\t\t\t\tg\n\t\t\t\t\t\t.attr(\"class\", \"yAxis\")\n\t\t\t\t\t\t.call(d3.axisLeft(y)\n\t\t\t\t\t\t\t.ticks(ticks.y)\n\t\t\t\t\t\t\t.tickFormat(d3.format(\".2s\"))\n\t\t\t\t\t\t\t.tickSize(-1 * width))\n\t\t\t\t\t\t.call(function(h) { h.select(\".domain\").remove(); })\n\t\t\t\t},\n\t\t\t\tbisectDate = function(mx) {\n\t\t\t\t\tvar bisect = d3.bisector(function(d) { return d.date }).left,\n\t\t\t\t\t\tdate = x.invert(mx),\n\t\t\t\t\t\tindex = bisect(data, date, 1),\n\t\t\t\t\t\ta = data[index - 1],\n\t\t\t\t\t\tb = data[index];\n\t\t\t\t\treturn date - a.date > b.date - date ? b : a;\n\t\t\t\t},\n\t\t\t\ttooltip,\n\t\t\t\tcontainer = d3.select(\"#\" + id),\n\t\t\t\taspect = origWidth / origHeight;\n\n\t\t\tsvg = container.append(\"svg\")\n\t\t\t\t.attr(\"width\", origWidth)\n\t\t\t\t.attr(\"height\", origHeight)\n\t\t\t\t.attr(\"perserveAspectRatio\", \"xMidYMid meet\")\n\t\t\t\t.attr(\"viewBox\", \"0 0 \" + origWidth + \" \" + origHeight)\n\t\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\t\t\t// lazy resize, keeps proportions\n\t\t\t$( window ).resize(function() {\n\t\t\t\tvar targetWidth = container.node().getBoundingClientRect().width;\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"width\", targetWidth);\n\t\t\t\tcontainer.selectAll(\"svg\").attr(\"height\", targetWidth / aspect);\n\t\t\t});\n\n\t\t\tsvg.append(\"g\").call(xAxis);\n\t\t\tsvg.append(\"g\").call(yAxis);\n\n\t\t\tsvg.append(\"path\")\n\t\t\t\t.datum(data)\n\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t.attr(\"stroke-width\", strokeWidth)\n\t\t\t\t.attr(\"stroke\", \"black\")\n\t\t\t\t.attr(\"class\", \"line \" + accentColorClass)\n\t\t\t\t.attr(\"d\", d3.line()\n\t\t\t\t\t.x(function(d) { return x(d.date) })\n\t\t\t\t\t.y(function(d) { return y(d.value) })\n\t\t\t\t);\n\n\t\t\tsvg.append(\"g\")\n\t\t\t\t.selectAll(\"circle\")\n\t\t\t\t.data(data.filter(function(d) { return d.event; }))\n\t\t\t\t.enter(\"circle\")\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\", \"circle \" + accentColorClass)\n\t\t\t\t.attr(\"r\", circleDiameter)\n\t\t\t\t.attr(\"cx\", function(d) { return x(d.date); })\n\t\t\t\t.attr(\"cy\", function(d) { return y(d.value); });\n\n\t\t\ttooltip = svg.append(\"g\");\n\n\t\t\tsvg.append('rect')\n\t\t\t\t.attr(\"class\", \"overlay\")\n\t\t\t\t.attr(\"pointer-events\", \"all\")\n\t\t\t\t.attr('x', 0)\n\t\t\t\t.attr('y', 0)\n\t\t\t\t.attr('width', width)\n\t\t\t\t.attr('height', height)\n\t\t\t\t.on(\"touchmove mousemove\", function() {\n\t\t\t\t\tvar hoverD = bisectDate(d3.mouse(this)[0]),\n\t\t\t\t\t\tcontext = hoverD.date.toLocaleString(undefined, timeFormatPrefs) + \"\\n\" + d3.format(\",\")(hoverD.value);\n\t\t\t\t\ttooltip\n\t\t\t\t\t\t.attr(\"transform\", \"translate(\" + x(hoverD.date) + \",\" + y(hoverD.value) + \")\")\n\t\t\t\t\t\t.call(callout, context, x(hoverD.date), hoverD.event);\n\t\t\t\t\tif (hoverD.event) {\n\t\t\t\t\t\t$(\"#label-date\").text(hoverD.date.toLocaleString(undefined, timeFormatPrefs));\n\t\t\t\t\t\t$(\"#label-name\").text(hoverD.event);\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"opacity\", 1);\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"max-height\", 10 + \"rem\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"opacity\", 0);\n\t\t\t\t\t\t$(\"#linechart-label\").css(\"max-height\", 2 + \"rem\");\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"touchend mouseleave\", function() {\n\t\t\t\t\ttooltip.call(callout, null);\n\t\t\t\t});\n\t\t}\n\n\t\taddVis();\n\n\t}\n\n\t$(\".d3-linechart\").each(function() {\n\t\tlineChart(this.id);\n\t});\n\n\n});"]}