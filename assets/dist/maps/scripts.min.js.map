{"version":3,"sources":["scripts.min.js"],"names":["debounce","func","wait","immediate","timeout","context","this","args","arguments","callNow","clearTimeout","setTimeout","apply","$","on","e","preventDefault","formData","data","urlData","url","baseurl","params","selectedFilter","order","val","orderby","s","post_type","map","get","window","location","protocol","host","decodeURIComponent","param","history","pushState","action","css","opacity","ajax","type","shiro","ajax_url","success","result","resultData","posts_html","empty","append","pagination","error","jQuery","document","ready","toggleSearch","blur","focus","openSearch","fadeIn","addClass","closeSearch","removeClass","fadeOut","toggleLanguages","state","$list","$button","toggle","toggleClass","width","position","left","outerWidth","flickity","rightToLeft","wmfrtl","enable","cellAlign","contain","pageDots","prevNextButtons","freeScroll","keyup","key","click","is","hide","show","event","stopPropagation","hasClass","length","matchMedia","matches","target","visions","currentVision","cycleVision","prevVision","hoverAddClass","container","parent","elem","className","hover","closest","svg4everybody","headings","headingHeights","each","index","value","push","clientHeight","maxHeight","reduce","a","b","Math","max","height","wrap","watchCSS","t","title","c","createElement","p","i","setAttribute","encodeURI","attr","appendChild","createTextNode","remove","animate","scrollTop","offset","top","diffHeight","contentHeight","amountToReduce","contentBottom","outerHeight","ungridTop","root","undefined","checkHeadingPosition","scrollPosition","heading","getPosition","$link","markActive","Heading","$el","$toc","$links","find","Stickyfill","$heading","scroll","prototype","fn","fitVids","options","settings","customSelector","ignore","extend","selectors","ignoreList","$allVideos","join","not","$this","parents","tagName","toLowerCase","isNaN","aspectRatio","parseInt","videoName","_count","removeAttr"],"mappings":"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","file":"../scripts.min.js","sourcesContent":["/**\n * Generic site JavaScript.\n */\n\n(function($) {\n\n\t'use strict';\n\n\t$( '#searchFilter' ).on( 'submit', function(e) {\n\t\te.preventDefault();\n\n\t\tvar selectedFilter = $( '#sortSelect :selected' ),\n\t\t\torder = $( selectedFilter ).val(),\n\t\t\torderby = $( selectedFilter ).data( 'type' ),keyword = $( '#keyword' ).val(),\n\t\t\tdata = {\n\t\t\t\ts: keyword,\n\t\t\t\torder: order,\n\t\t\t\torderby: orderby,\n\t\t\t};\n\n\t\tdata.post_type = $( '#searchFilter input:checkbox:checked' ).map( function() {\n\t\t\treturn $(this).val();\n\t\t}).get() || [];\n\n\t\tdoSearch( data );\n\t})\n\n\tfunction doSearch( formData ) {\n\t\tvar data = formData || {};\n\n\t\tupdateUri( formData );\n\n\t\tdata.action = 'ajax_search';\n\n\t\t$( '#search-results' ).css( { opacity: 0.5 } );\n\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\turl: shiro.ajax_url,\n\t\t\tdata: data,\n\t\t\tsuccess: function( result ) {\n\t\t\t\tvar resultData = result.data || {};\n\n\t\t\t\tif ( resultData.posts_html ) {\n\t\t\t\t\t$( '#search-results' ).empty().append( resultData.posts_html );\n\t\t\t\t}\n\n\t\t\t\tif ( resultData.pagination ) {\n\t\t\t\t\t$( '#pagination' ).empty().append( resultData.pagination );\n\t\t\t\t}\n\n\t\t\t\tif ( resultData.pagination === '' ) {\n\t\t\t\t\t$( '#pagination' ).empty();\n\t\t\t\t}\n\n\t\t\t\t$( '#search-results' ).css( { opacity: 1 } );\n\t\t\t},\n\n\t\t\terror: function() {\n\t\t\t\t$( '#search-results' ).empty();\n\t\t\t\t$( '#pagination' ).empty();\n\n\t\t\t\t$( '#search-results' ).css( { opacity: 1 } );\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction updateUri( data ) {\n\t\tvar urlData = data || {},\n\t\t\turl = window.location,\n\t\t\tbaseurl = url.protocol + '//' + url.host + '/',\n\t\t\tparams = decodeURIComponent( $.param( urlData ) );\n\n\t\twindow.history.pushState( '', '', baseurl + '?' + params );\n\t}\n})(jQuery);\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\n\n/**\n *\n * Header JS\n *\n */\n\n\njQuery(document).ready(function($) {\n\n  // Transation bar into slider\n  $( '.translation-bar ul' ).flickity({\n      rightToLeft: wmfrtl.enable,\n      cellAlign: 'left',\n      contain: true,\n      pageDots: false,\n      prevNextButtons: false,\n      freeScroll: true\n  } );\n\n  $('.arrow-wrap').on('click', function() {\n    $('.translation-bar ul').flickity('next');\n  });\n\n  $('.back-arrow-wrap').on('click', function() {\n    $('.translation-bar ul').flickity('prev');\n  });\n\n  function toggleNav() {\n    $('.nav-links').toggleClass('open');\n    $('.header-inner').toggleClass('nav-open');\n\n    $('.mobile-nav-toggle .icon-close').toggle();\n    $('.mobile-nav-toggle .icon-menu').toggle();\n    $('.mobile-cover').toggle();\n\n\n    $('.logo-container_sm .icon-logo-horizontal').toggleClass('fade-20');\n    $('.search-toggle').toggleClass('fade-20');\n    $('.language-dropdown').toggleClass('fade-20');\n\n    if ($('.top-nav').hasClass('pinned')) {\n      jQuery('.list-inline.open').css('top','55px');\n    } else {\n      jQuery('.list-inline.open').css('top','100px');\n    }\n  }\n\n  function closeNav() {\n    $('.nav-links').removeClass('open');\n    $('.header-inner').removeClass('nav-open');\n\n    $('.mobile-nav-toggle .icon-close').hide();\n    $('.mobile-nav-toggle .icon-menu').show();\n    $('.mobile-cover').hide();\n\n    $('.logo-container_sm .icon-logo-horizontal').removeClass('fade-20');\n    $('.search-toggle').removeClass('fade-20');\n    $('.language-dropdown').removeClass('fade-20');\n  }\n\n  function toggleSearch() {\n    $('.search-toggle').blur();\n    $('.search-form input').focus();\n  }\n\n  function openSearch() {\n    $('.search-overlay').fadeIn(500, function(){\n      $('.search-form input').focus();\n      $('.nav-container, .search-overlay').addClass('search-open');\n      $('.search-bar-container').addClass('is-open');\n      toggleSearch();\n    })\n  }\n\n  $(document).keyup(function(e) {\n     if (e.key === \"Escape\") {\n        closeSearch();\n        toggleLanguages(false);\n    }\n  });\n\n  function closeSearch() {\n    $( '.search-bar-container' ).removeClass('is-open');\n    $('.search-overlay').fadeOut(400, function(){\n      $('.nav-container, .search-overlay').removeClass('search-open');\n      toggleSearch();\n    });\n  }\n\n  function toggleLanguages(state) {\n    $list = $('.language-list');\n    $button = $('.language-dropdown');\n\n    $list.toggle(state);\n    $('.mobile-cover').toggle(state);\n\n    $('.logo-container_sm .icon-logo-horizontal').toggleClass('fade-20', state);\n    $('.search-toggle').toggleClass('fade-20', state);\n    $('.mobile-nav-toggle').toggleClass('fade-20', state);\n\n    // Position the dropdown right-aligned to the button\n    if ($(window).width() > 762) {\n      $list.css('left',\n        $('.language-dropdown').position().left +\n        $('.language-dropdown').outerWidth() -\n        $list.outerWidth()\n      );\n    }\n  }\n\n  $(window).click(function() {\n    if ($('.language-list').is(':visible')) {\n      toggleLanguages(false);\n    }\n  });\n\n  $('.mobile-cover').click(function () {\n    closeNav(false);\n    toggleLanguages(false);\n    $(this).hide();\n  })\n\n  $('.language-list').click(function(event){\n    event.stopPropagation();\n  });\n\n  $('.language-dropdown').click(function () {\n    if ($(this).hasClass('fade-20')) return;\n    toggleLanguages();\n    event.stopPropagation();\n  })\n\n\n  $('.mobile-nav-toggle').on('click', function() {\n    if ($(this).hasClass('fade-20')) return;\n    toggleNav();\n    // If search is open, close it.\n    if ($('.search-open').length) {\n      $('.logo-nav-container').removeClass('search-open');\n    }\n  });\n\n  $('.search-toggle').on('click', function() {\n    if ($(this).hasClass('fade-20')) return;\n    // If mobile nav is open, close it.\n    if ($('.nav-open').length) {\n      $('.nav-links').removeClass('open');\n      $('.header-inner').removeClass('nav-open');\n      openSearch();\n    } else {\n      openSearch();\n    }\n  });\n\n  // On resize, remove any open nav classes if desktop size, otheriwise, blue overlay behind nav will still be there.\n  $(window).on('resize', function() {\n\n    if (window.matchMedia(\"(min-width: 1050px)\").matches) {\n      if ($('.nav-open').length) {\n        $('.nav-links').removeClass('open');\n        $('.header-inner').removeClass('nav-open');\n      }\n    }\n  });\n\n  // Hide search bar container if mouse is clicked outside of search div or search toggle and search div is open\n  $('.search-overlay').on('click', function(e) {\n    if ($(e.target).hasClass('search-open')) {\n      closeSearch();\n    }\n  });\n\n  $('.search-close-esc').on('click', closeSearch);\n  $('.search-close-mobile').on('click', closeSearch);\n\n  // Cycle the visions\n  var visions = $('.vision');\n  var currentVision = 0;\n\n  function cycleVision() {\n    var prevVision = currentVision;\n    if ( currentVision === (visions.length-1) ) {\n      currentVision = 0;\n    } else {\n      currentVision += 1;\n    }\n    $(visions[prevVision]).fadeOut(750, function () {\n      $(visions[currentVision]).fadeIn(750);\n    });\n\n    window.setTimeout( cycleVision, 5000);\n  }\n  if (visions.length > 1) {\n    window.setTimeout( cycleVision, 5000);\n  }\n\n });\n\njQuery(document).ready(function($) {\n\n  // Hover on an element, and add class to closest parent.\n  function hoverAddClass(container, parent, elem, className) {\n    $(container + ' ' + elem).hover(\n      function () {\n        $(this).closest(parent).addClass(className);\n      },\n      function () {\n        $(this).closest(parent).removeClass(className);\n      }\n    );\n  }\n\n  // News category list, give li item a bottom border turquoise.\n  hoverAddClass('.news-categories', 'li', 'a', 'border-turquoise');\n\n  // Related News, take down the opacity of the darkening gradient.\n  hoverAddClass('.related-news', '.bg-img', '.card-heading', 'headline-hover');\n\n  // Translation bar, add underline to li\n  hoverAddClass('.translation-bar', 'li', 'a', 'hover-underline');\n\n  // Darken news images when headline is hovered\n  hoverAddClass('.cta-news', '.card', '.h2 a', 'darken-img');\n  hoverAddClass('.card-list-container', '.card', '.h3 a', 'darken-img');\n\n});\n\nsvg4everybody();\n\n/**\n *\n * Main site JS\n *\n */\njQuery(document).ready(function($) {\n\n  // Related News module.  Keep h3 headings the same height so the images stay the same height as well.\n  var headings = $('.related-news h3'),\n    headingHeights = [];\n\n  headings.each(function(index, value){\n    headingHeights.push(value.clientHeight);\n  });\n\n  var maxHeight = headingHeights.reduce(function(a, b) {\n    return Math.max(a, b);\n  }, 0);\n\n  headings.height(maxHeight);\n\n\n  // Blockquotes\n  // Since these blockquotes need to be display:inline for the quotation marks to function as designed, we can't add margin to it. This will wrap WordPress blockquotes in a container div to handle positioning and spacing.\n  $('article blockquote').wrap( \"<div class='blockquote-container'></div>\")\n\n  // Three up People module becomes slider on mobile.\n  $('.people.slider-on-mobile').flickity({\n    cellAlign: 'left',\n    contain: true,\n    pageDots: false,\n    prevNextButtons: false,\n    watchCSS: true\n  });\n\n\n\n  // Run a quick resize event on flickity - in case cards don't get spread properly spaces out cards.\n  setTimeout(function(){\n    $('.people.slider-on-mobile').flickity( 'resize' );\n  }, 500);\n\n\n  $('.news-categories .slider-on-mobile').flickity({\n    cellAlign: 'left',\n    contain: true,\n    pageDots: false,\n    prevNextButtons: false,\n    watchCSS: true\n  });\n\n\n  // Photo credits hover effect\n  // Based on:\n  // http://cssglobe.com/lab/tooltip/02/\n  // http://cssglobe.com/lab/tooltip/02/main.js\n\n  function imagePreview() {\n\n    $( 'a.preview' ).hover( function() {\n      this.t     = this.title;\n      this.title = '';\n\n      var c = ( this.t != '' ) ? this.t : '',\n          b = document.createElement( 'br' ),\n          p = document.createElement( 'p' ),\n          i = document.createElement( 'img' );\n\n      p.setAttribute( 'id', 'preview' );\n      i.setAttribute( 'src', encodeURI( $(this).attr( 'data-src' ) ) );\n      i.setAttribute( 'alt', 'Image Preview' );\n\n      p.appendChild( i );\n\n      if ( c !== '' ) {\n\t\t  p.appendChild( b );\n\t\t  p.appendChild( document.createTextNode( c ) );\n      }\n\n      $(this).append( p );\n\n      $( '#preview' ).addClass( 'preview-visible' );\n    },\n    function() {\n      this.title = this.t;\n      $( '#preview' ).remove();\n    } );\n  };\n\n  imagePreview();\n\n\n\n  $('#dismiss-notification').click( function(){\n    $('.notification-bar').fadeOut(\"slow\", function(){\n    });\n  });\n\n  $('a.niceScroll').on('click', function(event){\n    event.preventDefault();\n    var TOP_MARGIN = 100;\n    $('html, body').animate({\n        scrollTop: $( $.attr(this, 'href') ).offset().top - TOP_MARGIN\n    }, 1000);\n  });\n\n  // Move blocks in the ungrid\n  if ( $('.ungrid').length > 0 ) {\n    var maxHeight = 235;\n    var h1Height = $('.ungrid h1').height();\n    var diffHeight = maxHeight - h1Height;\n    $('.ungrid-line').css( 'margin-top', ( -32 - diffHeight ) );\n\n    var contentHeight = $('.ungrid .content').height() - 80;\n    var ungridLineHeight = 224 + ( -32 - diffHeight );\n    var amountToReduce = 50 - ungridLineHeight;\n\n    if ( contentHeight > 200 ) {\n        amountToReduce += contentHeight - 200;\n    }\n\n    $('.ungrid-line').css( 'height', ( 224 + amountToReduce ) );\n\n    if ($(window).width() < 762) { // On mobile\n      var contentBottom = $('.content').position().top + $('.content').outerHeight();\n      var ungridTop = $('.ungrid-top-box').position().top;\n      $('#content').css('margin-top', contentBottom - ungridTop + 50);\n    }\n  }\n\n  // Pinning nav on scrollTop\n  /* eslint-disable */\n  jQuery(window).on('scroll', function () {\n    if ( jQuery(this).scrollTop() > 0 ) {\n      jQuery('.top-nav').addClass('pinned');\n      jQuery('.list-inline.open').css('top','50px');\n    } else {\n      jQuery('.top-nav').removeClass('pinned');\n      jQuery('.list-inline.open').css('top','100px');\n    }\n  })\n  /* eslint-enable */\n\n});\n\n(function($, root, undefined) {\n  $(function() {\n    var $toc, $links, headings;\n\n    $toc     = $('.toc');\n    $links   = $toc.find('.toc-link');\n    headings = [];\n\n    // Stick the table of contents in its container\n    $toc.Stickyfill();\n\n    // Get a heading for each top-level link in the table of contents\n    $links.each(function() {\n      var $link, $heading;\n\n      $link    = $(this);\n      $heading = $($link.attr('href'));\n\n      headings.push( new Heading($heading, $link) );\n    });\n\n    // On scroll, see which heading is closest and highlight it\n    $(window).scroll(function() {\n      debounce(checkHeadingPosition(headings), 500);\n    });\n\n    // And make sure that the position is checked on page load.\n    checkHeadingPosition(headings)\n  });\n\n  // Loop through headings and see which one is in view\n  function checkHeadingPosition(headings) {\n    var scrollPosition = $(window).scrollTop();\n\n    $.each(headings, function(i) {\n      var heading = headings[i];\n\n      if( scrollPosition > heading.getPosition() - 200 ) {\n        resetHeadings(headings);\n        heading.markActive();\n      }\n    })\n  }\n\n  // Return all headings to inactive state\n  function resetHeadings(headings) {\n    $.each(headings, function(i) {\n      var heading = headings[i];\n\n      heading.$link.removeClass('-active');\n    });\n  }\n\n  // Heading object\n  function Heading($el, $link) {\n    this.$el = $el;\n    this.$link = $link;\n  }\n\n  Heading.prototype.getPosition = function() {\n    return this.$el.offset().top;\n  }\n\n  Heading.prototype.markActive = function() {\n    this.$link.addClass('-active');\n  }\n})(jQuery, this);\n\n/*jshint browser:true */\n/*!\n* FitVids 1.1\n*\n* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com\n* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/\n* Released under the WTFPL license - http://sam.zoy.org/wtfpl/\n*\n*/\n\n;(function( $ ){\n\n  'use strict';\n\n  $.fn.fitVids = function( options ) {\n    var settings = {\n      customSelector: null,\n      ignore: null\n    };\n\n    if ( options ) {\n      $.extend( settings, options );\n    }\n\n    return this.each(function(){\n      var selectors = [\n        'iframe[src*=\"player.vimeo.com\"]',\n        'iframe[src*=\"youtube.com\"]',\n        'iframe[src*=\"youtube-nocookie.com\"]',\n        'iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n        'object',\n        'embed'\n      ];\n\n      if (settings.customSelector) {\n        selectors.push(settings.customSelector);\n      }\n\n      var ignoreList = '.fitvidsignore';\n\n      if(settings.ignore) {\n        ignoreList = ignoreList + ', ' + settings.ignore;\n      }\n\n      var $allVideos = $(this).find(selectors.join(','));\n      $allVideos = $allVideos.not('object object'); // SwfObj conflict patch\n      $allVideos = $allVideos.not(ignoreList); // Disable FitVids on this video.\n\n      $allVideos.each(function(){\n        var $this = $(this);\n        if($this.parents(ignoreList).length > 0) {\n          return; // Disable FitVids on this video.\n        }\n        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }\n        if ((!$this.css('height') && !$this.css('width')) && (isNaN($this.attr('height')) || isNaN($this.attr('width'))))\n        {\n          $this.attr('height', 9);\n          $this.attr('width', 16);\n        }\n        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),\n            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),\n            aspectRatio = height / width;\n        if(!$this.attr('name')){\n          var videoName = 'fitvid' + $.fn.fitVids._count;\n          $this.attr('name', videoName);\n          $.fn.fitVids._count++;\n        }\n        $this.wrap('<div class=\"fluid-width-video-wrapper\"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+'%');\n        $this.removeAttr('height').removeAttr('width');\n      });\n    });\n  };\n\n  // Internal counter for unique video names.\n  $.fn.fitVids._count = 0;\n\n  // Wrap video (iframe) in parent div with .video-container class to activate fitVids.\n  $(\".video-container\").fitVids();\n\n})( window.jQuery );"]}